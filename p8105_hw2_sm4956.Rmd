---
title: "p8105_hw2_sm4956"
author: Shivangi Deepak Mewada
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Problem 0
* created repository and R project for HW2, created rmd file and rending to GitHub. 
* created a sub-directory/ data folder that has all the data set files to be used for this HW

```{r load_libraries}
library(tidyverse)
library(readxl)
options(tibble.print_min = 5)
```

## Problem 1

reading and cleaning data, retaining important variables

```{r}
trans_ent = 
  read_csv(
    "data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
    col_types = cols(Route8 = "c", Route9 = "c", Route10 = "c", Route11 = "c")) %>% 
  janitor::clean_names() %>% 
  select(
    line, station_name, station_latitude, station_longitude, 
    starts_with("route"), entry, exit_only, vending, entrance_type, 
    ada) %>% 
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

To check the number of distinct stations:

```{r}
trans_ent %>% 
  select(station_name, line) %>% 
  distinct
```

To check the number of distinct stations that are ADA Compliant:

```{r}
trans_ent %>% 
  filter(ada == TRUE) %>% 
  select(station_name, line) %>% 
  distinct
```

To see the proportion of station entrances/exits without vending allow entrance:

```{r}
trans_ent %>% 
  filter(vending == "NO") %>% 
  pull(entry) %>% 
  mean
```

To check the distinct stations serving A trains (and the ones that are ADA Compliant):

```{r}
trans_ent %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_num",
    values_to = "route") %>% 
  filter(route == "A") %>% 
  select(station_name, line) %>% 
  distinct

trans_ent %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_num",
    values_to = "route") %>% 
  filter(route == "A", ada == TRUE) %>% 
  select(station_name, line) %>% 
  distinct
```

### Answers

* There are 465 distinct stations.
* There are 84 distinct stations, that are ADA compliant.
* the proportion of station entrances / exits without vending allow entrance is 0.38.
* There are 60 distinct stations, that serve the A train.
* There are 17 distinct stations, that serve the A train and are ADA compliant.

## Problem 2

Reading and cleaning the data set for Mr Trash Wheel

```{r Mr Trash}
trash_W1 = 
  readxl::read_excel("data/Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N549") %>%
  janitor::clean_names() %>%
  drop_na (dumpster) %>%
mutate (
        sports_balls = as.integer(sports_balls),
        wheel = "mrtrash")
```

Now, I will repeat the same for Professor Trash Wheel

```{r Prof Trash}
prof_W2 = 
  read_excel("data/Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", range = "A2:M96") %>%
  janitor::clean_names() %>%
  drop_na (dumpster) %>%
mutate (year = as.character(year),
       wheel = "proftrash" )
```

Combining both the data sets:

```{r combining}
merged_trash = bind_rows (trash_W1, prof_W2) %>%
  janitor::clean_names()
```

### Description of the data set post merging:

`r skimr:: skim(merged_trash)`

- The total number of observations/rows are **`r nrow(merged_trash)`** and the total number of variables/columns are **`r ncol(merged_trash)`**
- There are 3 character variables, 11 numeric variables and 1 date variable 
- The main variables in the data set are weight of the trash (in tons), volume of the trash (in cubic yards) and the amount of various types of trash collected like plastic bottles, chips bags, cigarette butts, glass bottles, sports balls, polystyrene), the homes powered, and the distribution by names (Mr and Prof Trash).
- The total weight of trash collected combined is **`r sum(merged_trash$weight_tons, na.rm = TRUE)`** tons
- The total weight of trash collected by Professor Trash is **`r sum(prof_W2$weight_tons, na.rm = TRUE)`** tons
- The total number of sports balls collected by Mr Trash is **`r sum(merged_trash[which(merged_trash$year == "2020" & merged_trash$wheel == "mrtrash"), "sports_balls"])`**


## Problem 3

Cleaning data set polsmonth

```{r polsmonth}
pols_ds = read_csv(
    "data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(col=mon, into = c("year", "month", "day"), sep ='-', convert = TRUE) %>%
  mutate(month = month.abb[month],
         president = case_when (prez_gop == 1 ~ "gop", prez_dem == 1 ~ "dem")) %>%
  select(-prez_gop, -prez_dem, -day)
```

Cleaning data set snp

```{r snp}
snp_ds = read_csv(
    "data/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(col= date, into = c("month", "day", "year"), sep ='/', convert = TRUE) %>%
  mutate(month = month.abb[month],
         year = ifelse(year > 49, year + 1900, year + 2000)) %>%
select(-day) %>%
  select (year, month, everything())

```

Cleaning data set unemployment

```{r unemployment}
unemploy_ds = read_csv(
    "data/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names() %>%
  pivot_longer (jan:dec,
names_to = "month",
values_to = "unemployment_%") %>%
  mutate (month = str_to_title(month))
  
```

